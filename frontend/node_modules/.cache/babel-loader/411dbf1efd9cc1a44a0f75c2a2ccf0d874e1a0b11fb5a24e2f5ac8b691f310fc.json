{"ast":null,"code":"// src/context/AuthContext.jsx\nconst login = async ({\n  username,\n  password\n}) => {\n  try {\n    var _res$data$user, _res$data$user$roles, _res$data$user2;\n    const res = await authAPI.login({\n      username,\n      password\n    });\n    localStorage.setItem('token', res.data.token);\n\n    // LẤY ROLE TỪ roles.name\n    const roleName = ((_res$data$user = res.data.user) === null || _res$data$user === void 0 ? void 0 : (_res$data$user$roles = _res$data$user.roles) === null || _res$data$user$roles === void 0 ? void 0 : _res$data$user$roles.name) || 'USER';\n    const userData = {\n      username,\n      role: roleName,\n      email: (_res$data$user2 = res.data.user) === null || _res$data$user2 === void 0 ? void 0 : _res$data$user2.email\n    };\n    localStorage.setItem('user', JSON.stringify(userData));\n    setUser(userData);\n    return true;\n  } catch (err) {\n    alert('Sai username hoặc mật khẩu!');\n    return false;\n  }\n};","map":{"version":3,"names":["login","username","password","_res$data$user","_res$data$user$roles","_res$data$user2","res","authAPI","localStorage","setItem","data","token","roleName","user","roles","name","userData","role","email","JSON","stringify","setUser","err","alert"],"sources":["D:/Baitap/Web2/Endgame_Project/frontend/src/context/AuthContext.jsx"],"sourcesContent":["// src/context/AuthContext.jsx\r\nconst login = async ({ username, password }) => {\r\n  try {\r\n    const res = await authAPI.login({ username, password });\r\n    localStorage.setItem('token', res.data.token);\r\n\r\n    // LẤY ROLE TỪ roles.name\r\n    const roleName = res.data.user?.roles?.name || 'USER';\r\n    const userData = {\r\n      username,\r\n      role: roleName,\r\n      email: res.data.user?.email\r\n    };\r\n\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    setUser(userData);\r\n    return true;\r\n  } catch (err) {\r\n    alert('Sai username hoặc mật khẩu!');\r\n    return false;\r\n  }\r\n};"],"mappings":"AAAA;AACA,MAAMA,KAAK,GAAG,MAAAA,CAAO;EAAEC,QAAQ;EAAEC;AAAS,CAAC,KAAK;EAC9C,IAAI;IAAA,IAAAC,cAAA,EAAAC,oBAAA,EAAAC,eAAA;IACF,MAAMC,GAAG,GAAG,MAAMC,OAAO,CAACP,KAAK,CAAC;MAAEC,QAAQ;MAAEC;IAAS,CAAC,CAAC;IACvDM,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,GAAG,CAACI,IAAI,CAACC,KAAK,CAAC;;IAE7C;IACA,MAAMC,QAAQ,GAAG,EAAAT,cAAA,GAAAG,GAAG,CAACI,IAAI,CAACG,IAAI,cAAAV,cAAA,wBAAAC,oBAAA,GAAbD,cAAA,CAAeW,KAAK,cAAAV,oBAAA,uBAApBA,oBAAA,CAAsBW,IAAI,KAAI,MAAM;IACrD,MAAMC,QAAQ,GAAG;MACff,QAAQ;MACRgB,IAAI,EAAEL,QAAQ;MACdM,KAAK,GAAAb,eAAA,GAAEC,GAAG,CAACI,IAAI,CAACG,IAAI,cAAAR,eAAA,uBAAbA,eAAA,CAAea;IACxB,CAAC;IAEDV,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEU,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAAC,CAAC;IACtDK,OAAO,CAACL,QAAQ,CAAC;IACjB,OAAO,IAAI;EACb,CAAC,CAAC,OAAOM,GAAG,EAAE;IACZC,KAAK,CAAC,6BAA6B,CAAC;IACpC,OAAO,KAAK;EACd;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}