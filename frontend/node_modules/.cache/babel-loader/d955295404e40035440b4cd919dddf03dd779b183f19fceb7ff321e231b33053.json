{"ast":null,"code":"var _jsxFileName = \"D:\\\\Baitap\\\\Web2\\\\Endgame_Project\\\\frontend\\\\src\\\\context\\\\OrderContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/OrderContext.jsx\nimport { createContext, useContext, useState } from 'react';\nimport { orderAPI } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderContext = /*#__PURE__*/createContext();\nexport function OrderProvider({\n  children\n}) {\n  _s();\n  const [selectedTable, setSelectedTable] = useState(null);\n  const [orderItems, setOrderItems] = useState([]);\n  const navigate = useNavigate();\n  const addItem = product => {\n    setOrderItems(prev => {\n      const existing = prev.find(i => i.id === product.id);\n      if (existing) {\n        return prev.map(i => i.id === product.id ? {\n          ...i,\n          qty: i.qty + 1\n        } : i);\n      }\n      return [...prev, {\n        ...product,\n        qty: 1\n      }];\n    });\n  };\n  const removeItem = id => {\n    setOrderItems(prev => prev.filter(i => i.id !== id));\n  };\n  const createOrder = async () => {\n    if (!selectedTable || orderItems.length === 0) return;\n    const orderData = {\n      table: {\n        id: selectedTable.id\n      },\n      items: orderItems.map(item => ({\n        productId: item.id,\n        productName: item.name,\n        quantity: item.qty,\n        price: item.price\n      })),\n      totalPrice: orderItems.reduce((sum, i) => sum + i.price * i.qty, 0)\n    };\n    try {\n      await orderAPI.create(orderData);\n      alert('Đặt món thành công!');\n      setOrderItems([]);\n      setSelectedTable(null);\n      navigate('/order-success');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert('Lỗi đặt món: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(OrderContext.Provider, {\n    value: {\n      selectedTable,\n      setSelectedTable,\n      orderItems,\n      addItem,\n      removeItem,\n      createOrder\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderProvider, \"c84g3r/E+h0zfo4HXi2GWZdhduE=\", false, function () {\n  return [useNavigate];\n});\n_c = OrderProvider;\nexport const useOrder = () => {\n  _s2();\n  return useContext(OrderContext);\n};\n_s2(useOrder, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"OrderProvider\");","map":{"version":3,"names":["createContext","useContext","useState","orderAPI","useNavigate","jsxDEV","_jsxDEV","OrderContext","OrderProvider","children","_s","selectedTable","setSelectedTable","orderItems","setOrderItems","navigate","addItem","product","prev","existing","find","i","id","map","qty","removeItem","filter","createOrder","length","orderData","table","items","item","productId","productName","name","quantity","price","totalPrice","reduce","sum","create","alert","err","_err$response","_err$response$data","response","data","message","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useOrder","_s2","$RefreshReg$"],"sources":["D:/Baitap/Web2/Endgame_Project/frontend/src/context/OrderContext.jsx"],"sourcesContent":["// src/context/OrderContext.jsx\r\nimport { createContext, useContext, useState } from 'react';\r\nimport { orderAPI } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst OrderContext = createContext();\r\n\r\nexport function OrderProvider({ children }) {\r\n  const [selectedTable, setSelectedTable] = useState(null);\r\n  const [orderItems, setOrderItems] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const addItem = (product) => {\r\n    setOrderItems(prev => {\r\n      const existing = prev.find(i => i.id === product.id);\r\n      if (existing) {\r\n        return prev.map(i => i.id === product.id ? { ...i, qty: i.qty + 1 } : i);\r\n      }\r\n      return [...prev, { ...product, qty: 1 }];\r\n    });\r\n  };\r\n\r\n  const removeItem = (id) => {\r\n    setOrderItems(prev => prev.filter(i => i.id !== id));\r\n  };\r\n\r\n  const createOrder = async () => {\r\n    if (!selectedTable || orderItems.length === 0) return;\r\n\r\n    const orderData = {\r\n      table: { id: selectedTable.id },\r\n      items: orderItems.map(item => ({\r\n        productId: item.id,\r\n        productName: item.name,\r\n        quantity: item.qty,\r\n        price: item.price\r\n      })),\r\n      totalPrice: orderItems.reduce((sum, i) => sum + i.price * i.qty, 0)\r\n    };\r\n\r\n    try {\r\n      await orderAPI.create(orderData);\r\n      alert('Đặt món thành công!');\r\n      setOrderItems([]);\r\n      setSelectedTable(null);\r\n      navigate('/order-success');\r\n    } catch (err) {\r\n      alert('Lỗi đặt món: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <OrderContext.Provider value={{\r\n      selectedTable, setSelectedTable,\r\n      orderItems, addItem, removeItem, createOrder\r\n    }}>\r\n      {children}\r\n    </OrderContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useOrder = () => useContext(OrderContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}